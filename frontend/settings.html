<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Ustawienia profilu</title>
</head>
<body>
  <h1>Ustawienia profilu</h1>
  
  <form id="settingsForm">
    <label for="avatar">Avatar:</label>
    <input type="text" id="avatar" placeholder="Wklej link do obrazka">
    
    <button type="submit">Zapisz</button>
  </form>

  <script>
    const API_URL = "https://f1chat.onrender.com";
    const username = localStorage.getItem("username"); // zakładam że zapisujesz nick po logowaniu

    document.getElementById("settingsForm").addEventListener("submit", async (e) => {
      e.preventDefault();
      const avatar = document.getElementById("avatar").value;

      const res = await fetch(`${API_URL}/auth/update/${username}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ avatar })
      });

      const data = await res.json();
      alert(data.message || data.error);
    });
  </script>
</body>
</html>
